version: "1.0"
name: hello-crew
description: A minimal crew with a single Hello agent
entry_point: hello-agent

agents:
  - hello-agent

tasks:
  - name: respond-to-user
    description: Respond to the user's message
    agent: hello-agent

# ✅ Phase 5 Configuration Fields
settings:
  # Configuration Mode:
  # - permissive (default): Use safe defaults for missing parameters
  # - strict: Require all parameters to be explicitly set
  config_mode: strict  # ← Production mode: explicit configuration required

  # ===== TIMEOUT PARAMETERS (all 11 required in Strict Mode) =====
  parallel_timeout_seconds: 60              # Multiple agents running in parallel (seconds)
  tool_execution_timeout_seconds: 5         # Single tool/function call max time (seconds)
  tool_result_timeout_seconds: 30           # Tool result processing max time (seconds)
  min_tool_timeout_millis: 100              # Sanity check: minimum tool timeout (ms)
  stream_chunk_timeout_millis: 500          # Each streaming chunk processing timeout (ms)
  sse_keep_alive_seconds: 30                # Keep-alive ping interval for SSE (seconds)
  request_store_cleanup_minutes: 5          # Cleanup old request tracking data (minutes)
  retry_backoff_min_millis: 100             # Initial wait before first retry (ms)
  retry_backoff_max_seconds: 5              # Max backoff ceiling between retries (seconds)
  client_cache_ttl_minutes: 60              # How long to cache LLM clients (minutes)
  graceful_shutdown_check_millis: 100       # Check shutdown signal interval (ms)

  # ===== SIZE LIMITS (all 8 required in Strict Mode) =====
  max_input_size_kb: 10                     # Prevent DoS: max user input (KB)
  min_agent_id_length: 1                    # Prevent empty agent IDs (characters)
  max_agent_id_length: 128                  # Prevent unbounded ID growth (characters)
  max_request_body_size_kb: 100             # Prevent memory exhaustion: max HTTP body (KB)
  max_tool_output_chars: 2000               # Truncate large tool outputs (characters)
  stream_buffer_size: 100                   # Buffer capacity for streaming chunks
  max_stored_requests: 1000                 # Keep max N requests in memory for debugging

  # ===== THRESHOLD (required in Strict Mode) =====
  timeout_warning_threshold_pct: 20         # Warn when 80% of timeout consumed (as decimal)

  # ===== WEEK 1: COST CONTROL (all 4 required in Strict Mode) =====
  max_tokens_per_call: 4000                 # Maximum tokens per single request
  max_tokens_per_day: 100000                # Maximum tokens per 24-hour period
  max_cost_per_day: 50.0                    # Maximum daily budget in USD
  cost_alert_threshold: 0.80                # Alert when X% of daily budget is used (0.0-1.0)

  # ===== WEEK 2: MEMORY MANAGEMENT (all 6 required in Strict Mode) =====
  max_memory_mb: 512                        # Maximum memory per request in MB
  max_daily_memory_gb: 10                   # Maximum total memory per 24-hour period in GB
  memory_alert_percent: 80.0                # Alert when memory usage exceeds this % (0.0-100.0)
  max_context_window: 32000                 # Maximum context window size in tokens
  context_trim_percent: 20.0                # Percentage of context to trim when full (0.0-100.0)
  slow_call_threshold_seconds: 30           # Alert if call exceeds this duration (seconds)

  # ===== WEEK 2: PERFORMANCE & RELIABILITY (all 3 required in Strict Mode) =====
  max_errors_per_hour: 10                   # Maximum errors per hour before alerting
  max_errors_per_day: 50                    # Maximum errors per day before blocking
  max_consecutive_errors: 5                 # Maximum consecutive errors before blocking

  # ===== WEEK 2: RATE LIMITING & QUOTAS (all 4 required in Strict Mode) =====
  max_calls_per_minute: 60                  # Rate limit: maximum calls per minute
  max_calls_per_hour: 1000                  # Rate limit: maximum calls per hour
  max_calls_per_day: 10000                  # Rate limit: maximum calls per 24 hours
  enforce_quotas: true                      # Enforce quota limits (true=block, false=warn)
