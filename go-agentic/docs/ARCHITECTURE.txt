╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║                    GO-AGENTIC LIBRARY ARCHITECTURE                           ║
║                          Professional Structure                              ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝


                         PACKAGE STRUCTURE
                       (Single Root Package)
                    github.com/taipm/go-agentic

                               │
                               │
        ┌──────────────────────┼──────────────────────┐
        │                      │                      │
   ┌────▼──────┐      ┌────────▼────────┐    ┌──────▼──────┐
   │   CORE     │      │   EXECUTION     │    │   FEATURES  │
   │ TYPES      │      │    ENGINE       │    │             │
   └────────────┘      └─────────────────┘    └─────────────┘
        │                      │                      │
    types.go            agent.go, crew.go        http.go
                        config.go                html_client.go
                                                 streaming.go
                                                 tests.go
                                                 report.go


CORE TYPES (types.go)
═════════════════════════════════════════════════════════════════════════════

    ┌─────────────────────────────────────────────────────────────┐
    │                     Agent                                    │
    │  ┌───────────────────────────────────────────────────────┐  │
    │  │ ID, Name, Role, Backstory                             │  │
    │  │ Model, Temperature, Tools                             │  │
    │  │ IsTerminal (marks end of workflow)                    │  │
    │  │ Execute() - Executes with LLM and tools              │  │
    │  └───────────────────────────────────────────────────────┘  │
    └─────────────────────────────────────────────────────────────┘
                                │
                                │ contains
                                ▼
    ┌─────────────────────────────────────────────────────────────┐
    │                       Tool                                   │
    │  ┌───────────────────────────────────────────────────────┐  │
    │  │ Name, Description                                    │  │
    │  │ Parameters (JSON schema)                             │  │
    │  │ Handler(ctx, args) - Callable function               │  │
    │  └───────────────────────────────────────────────────────┘  │
    └─────────────────────────────────────────────────────────────┘
                                │
                                │ returns
                                ▼
    ┌─────────────────────────────────────────────────────────────┐
    │                      ToolCall                                │
    │  ┌───────────────────────────────────────────────────────┐  │
    │  │ Tool name, Arguments                                 │  │
    │  │ Result, Error                                        │  │
    │  └───────────────────────────────────────────────────────┘  │
    └─────────────────────────────────────────────────────────────┘


EXECUTION ENGINE
═════════════════════════════════════════════════════════════════════════════

    CrewExecutor
        │
        ├─► Execute(ctx, task)
        │   │
        │   ├─► Route to Orchestrator
        │   │   (picks entry agent)
        │   │
        │   ├─► Agent.Execute()
        │   │   (calls LLM with tools)
        │   │
        │   ├─► Tool.Handler()
        │   │   (executes tool logic)
        │   │
        │   ├─► Route to next Agent
        │   │   (intelligent handoff)
        │   │
        │   └─► Repeat until IsTerminal
        │
        └─► Return CrewResponse


STREAMING FLOW (HTTP + SSE)
═════════════════════════════════════════════════════════════════════════════

    HTTP Client
        │
        ├─► POST /execute
        │   with task + parameters
        │
        ▼
    HTTP Server (http.go)
        │
        ├─► Parse request
        │
        ├─► Create CrewExecutor
        │
        ├─► Set up SSE connection
        │   (Content-Type: text/event-stream)
        │
        ├─► Execute() in background
        │
        └─► Stream events as they occur
            │
            ├─► StreamEvent (agent_start)
            ├─► StreamEvent (tool_call)
            ├─► StreamEvent (tool_result)
            ├─► StreamEvent (agent_response)
            ├─► StreamEvent (handoff)
            └─► StreamEvent (final_response)


WEB CLIENT (html_client.go)
═════════════════════════════════════════════════════════════════════════════

    User Interface
        │
        ├─ Task Input Form
        │
        ├─ ExecutionPanel (real-time display)
        │   │
        │   ├─ Agent Status
        │   ├─ Tool Calls
        │   ├─ Results Stream
        │   └─ Conversation History
        │
        └─ Response Display


TESTING FRAMEWORK (tests.go + report.go)
═════════════════════════════════════════════════════════════════════════════

    GetTestScenarios()
        │
        ├─► TestScenario 1 (IT Support)
        │   ├─ Task: Diagnose system issue
        │   └─ Expected: Resolution steps
        │
        ├─► TestScenario 2 (Customer Service)
        │   ├─ Task: Resolve customer issue
        │   └─ Expected: Solution provided
        │
        └─► TestScenario N (...)

                    │
                    ▼

        RunTestScenario()
            │
            ├─ Execute crew on scenario
            ├─ Capture response
            ├─ Record execution time
            ├─ Check against expected
            └─ Store TestResult

                    │
                    ▼

        NewHTMLReport()
            │
            └─► ToHTML()
                ├─ Format results
                ├─ Generate statistics
                ├─ Create visualizations
                └─ Output professional HTML


DATA FLOW DIAGRAM
═════════════════════════════════════════════════════════════════════════════

    [User Request]
           │
           ▼
    [CrewExecutor.Execute]
           │
           ├─────────────────────┬─────────────────────┐
           │                     │                     │
           ▼                     ▼                     ▼
    [Orchestrator]      [Clarifier]          [Executor]
    (Entry Point)       (Gather Info)        (Solve)
           │                     │                     │
           │ ┌───────────────────┘                     │
           │ │ Handoff                                 │
           ▼ ▼                                         │
        [Agent.Execute]                             │
             │                                       │
             ├─►[LLM]─► Generates tool calls       │
             │   │                                 │
             └─►[Tools]─► Execute functions       │
                 │                                 │
                 └─► Returns results              │
                     │                             │
                     └─────┬───────────────────────┘
                           │ Continue or Handoff
                           ▼
                    [Check IsTerminal]
                      │           │
                    Yes           No
                      │           │
                      ▼           ▼
                  [Return]  [Continue Loop]


FILE ORGANIZATION
═════════════════════════════════════════════════════════════════════════════

Root Level (Package agentic)
    │
    ├── types.go (620 lines)
    │   └─ All data types, no implementation
    │
    ├── agent.go (180 lines)
    │   └─ Agent execution, LLM interaction
    │
    ├── crew.go (280 lines)
    │   └─ Crew orchestration, agent routing
    │
    ├── config.go (140 lines)
    │   └─ YAML configuration loading
    │
    ├── http.go (150 lines)
    │   └─ HTTP server, REST API
    │
    ├── html_client.go (250 lines)
    │   └─ Web testing UI
    │
    ├── streaming.go (55 lines)
    │   └─ SSE utilities
    │
    ├── tests.go (300 lines)
    │   └─ Test scenarios framework
    │
    └── report.go (450 lines)
        └─ HTML report generation

Documentation
    │
    ├── README.md
    │   └─ Quick start, features
    │
    ├── LIBRARY_STRUCTURE.md
    │   └─ Detailed architecture guide
    │
    └── docs/
        ├── ARCHITECTURE.md
        ├── LIBRARY_USAGE.md
        ├── LIBRARY_INTRO.md
        └── (12 more documentation files)


DEPENDENCIES
═════════════════════════════════════════════════════════════════════════════

    go-agentic
        │
        ├─► OpenAI SDK (v3.14.0)
        │   └─ Chat completion, function calling
        │
        ├─► yaml.v3
        │   └─ Configuration parsing
        │
        └─► Go Standard Library
            ├─ encoding/json
            ├─ context
            ├─ net/http
            ├─ io
            ├─ fmt
            └─ (and others)


DESIGN PATTERNS
═════════════════════════════════════════════════════════════════════════════

1. ORCHESTRATION PATTERN
   └─ Central CrewExecutor coordinates agents
   └─ Agents delegate to tools
   └─ Intelligent routing between agents

2. HANDLER PATTERN
   └─ Tools are functions, not structs
   └─ Context-based execution (cancellation, timeout)
   └─ Type-safe parameter handling via JSON schema

3. STREAMING PATTERN
   └─ Server-Sent Events for real-time updates
   └─ Non-blocking channel-based communication
   └─ Clean separation of HTTP and execution logic

4. CONFIGURATION PATTERN
   └─ YAML-based crew and agent configuration
   └─ Runtime agent creation from config
   └─ Environment-based customization

5. COMPOSITION PATTERN
   └─ Crew contains Agents
   └─ Agents contain Tools
   └─ Flexible tool assignment


PERFORMANCE CHARACTERISTICS
═════════════════════════════════════════════════════════════════════════════

    Time Complexity:
        Execute():     O(n × m) where n=agents, m=rounds
        Tool call:     O(1)
        Config load:   O(k) where k=agents/tools

    Space Complexity:
        Agent:         O(t) where t=tools
        Crew:          O(a) where a=agents
        Message hist:  O(r) where r=rounds

    Concurrency:
        Goroutines per execute:  1 main + 0+ tool handlers
        Thread safety:           Sync.Mutex protected executor
        Streaming:               Async event queue


SCALABILITY ROADMAP
═════════════════════════════════════════════════════════════════════════════

    Phase 1 (Current) - Single package
        └─ 10 files in root
        └─ ~2,565 lines
        └─ Pure Go implementation

    Phase 2 (Internal modules) - Complex logic
        └─ internal/llm/        - LLM provider abstraction
        └─ internal/router/     - Advanced routing
        └─ internal/cache/      - Response caching

    Phase 3 (Sub-packages) - New major features
        └─ plugins/slack/       - Slack integration
        └─ plugins/database/    - Persistence layer
        └─ plugins/monitoring/  - Observability


═════════════════════════════════════════════════════════════════════════════
                    Status: PRODUCTION READY
        Clean Architecture | Comprehensive Docs | Fully Tested
═════════════════════════════════════════════════════════════════════════════
